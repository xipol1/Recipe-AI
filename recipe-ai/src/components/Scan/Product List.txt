import React from "react";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { Trash2, Save, Package } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

const CATEGORIES = [
  "frutas", "verduras", "carnes", "pescados", "lacteos", 
  "cereales", "legumbres", "especias", "aceites", "otros"
];

const UNITS = ["piezas", "kg", "g", "l", "ml", "latas", "paquetes"];

export default function ProductList({ 
  products, 
  onProductUpdate, 
  onProductRemove, 
  onSaveAll,
  isLoading 
}) {
  return (
    <Card className="shadow-lg border-0">
      <CardHeader>
        <CardTitle className="flex items-center gap-2">
          <Package className="w-6 h-6 text-green-600" />
          Productos Detectados ({products.length})
        </CardTitle>
        <p className="text-sm text-gray-600">
          Revisa y edita los productos antes de guardarlos en tu despensa
        </p>
      </CardHeader>
      <CardContent>
        <div className="space-y-4 mb-6">
          <AnimatePresence>
            {products.map((product, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0, y: -20 }}
                transition={{ delay: index * 0.1 }}
                className="p-4 border border-gray-200 rounded-lg bg-gradient-to-r from-gray-50 to-white"
              >
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Producto
                    </label>
                    <Input
                      value={product.name || ''}
                      onChange={(e) => onProductUpdate(index, { ...product, name: e.target.value })}
                      placeholder="Nombre del producto"
                    />
                  </div>
                  
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Cantidad
                    </label>
                    <div className="flex gap-2">
                      <Input
                        type="number"
                        min="0"
                        step="0.1"
 